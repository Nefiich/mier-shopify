{% comment %}
  Customizable Header Section
  - Logo on left
  - Navigation menu in center/right
  - Icons (search, wishlist, cart) on right
  - Fully customizable through theme editor
{% endcomment %}

<header id="section-{{ section.id }}" class="site-header" data-section-id="{{ section.id }}">
  <div class="header-container">
    
    <!-- Logo -->
    <div class="header-logo">
      <a href="{{ routes.root_url }}" class="logo-link">
        {% if section.settings.logo != blank %}
          <img src="{{ section.settings.logo | img_url: '300x' }}" 
               alt="{{ shop.name }}"
               width="{{ section.settings.logo_width }}"
               loading="eager">
        {% else %}
          <span class="logo-text">{{ shop.name }}</span>
        {% endif %}
      </a>
    </div>

    <!-- Navigation Menu -->
    <nav class="header-nav" role="navigation">
      <ul class="nav-menu">
        {% for link in section.settings.menu.links %}
          <li class="nav-item {% if link.links != blank %}has-dropdown{% endif %}">
            <a href="{{ link.url }}" 
               class="nav-link {% if link.active %}active{% endif %}"
               {% if link.links != blank %}aria-expanded="false"{% endif %}>
              {{ link.title }}
              {% if link.links != blank %}
                <svg class="dropdown-icon" width="10" height="6" viewBox="0 0 10 6" fill="none">
                  <path d="M1 1L5 5L9 1" stroke="currentColor" stroke-width="1.5"/>
                </svg>
              {% endif %}
            </a>
            
            {% if link.links != blank %}
              <ul class="dropdown-menu">
                {% for child_link in link.links %}
                  <li class="dropdown-item">
                    <a href="{{ child_link.url }}" class="dropdown-link">
                      {{ child_link.title }}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </nav>

    <!-- Header Actions -->
    <div class="header-actions">
      
      <!-- Search Icon -->
      {% if section.settings.show_search %}
        <a href="{{ routes.search_url }}" class="header-icon search-icon" aria-label="Search">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <circle cx="8" cy="8" r="6.5" stroke="currentColor" stroke-width="1.5"/>
            <path d="M13 13L18 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </a>
      {% endif %}

      <!-- Wishlist Icon -->
      {% if section.settings.show_wishlist %}
        <a href="{{ section.settings.wishlist_url | default: '/pages/wishlist' }}" 
           class="header-icon wishlist-icon" 
           aria-label="Wishlist">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M10 17.5L2.5 10C0.833333 8.33333 0.833333 5.5 2.5 3.83333C4.16667 2.16667 7 2.16667 8.66667 3.83333L10 5.16667L11.3333 3.83333C13 2.16667 15.8333 2.16667 17.5 3.83333C19.1667 5.5 19.1667 8.33333 17.5 10L10 17.5Z" stroke="currentColor" stroke-width="1.5"/>
          </svg>
        </a>
      {% endif %}

      <!-- Cart Icon -->
      {% if section.settings.show_cart %}
        <a href="{{ routes.cart_url }}" class="header-icon cart-icon" aria-label="Cart">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M2.5 2.5H3.5L5.5 12.5H15.5L17.5 5H4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="7" cy="16.5" r="1.5" stroke="currentColor" stroke-width="1.5"/>
            <circle cx="14" cy="16.5" r="1.5" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          {% if cart.item_count > 0 %}
            <span class="cart-count">{{ cart.item_count }}</span>
          {% endif %}
        </a>
      {% endif %}

      <!-- Mobile Menu Toggle -->
      <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>

    </div>

  </div>

  <!-- Badge (like "NOVA KOLEKCIJA SALE") -->
  {% if section.settings.show_badge and section.settings.badge_text != blank %}
    <div class="header-badge" style="background-color: {{ section.settings.badge_bg_color }}; color: {{ section.settings.badge_text_color }};">
      {{ section.settings.badge_text }}
    </div>
  {% endif %}

</header>

<style>
  #section-{{ section.id }}.site-header {
    position: {{ section.settings.header_position }};
    top: 0;
    left: 0;
    width: 100%;
    background: {{ section.settings.header_bg_color }};
    border-bottom: {{ section.settings.border_width }}px solid {{ section.settings.border_color }};
    z-index: 1000;
    transition: all 0.3s ease;
  }

  #section-{{ section.id }} .header-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: {{ section.settings.container_width }}px;
    margin: 0 auto;
    padding: {{ section.settings.header_padding_vertical }}px {{ section.settings.header_padding_horizontal }}px;
  }

  /* Logo */
  #section-{{ section.id }} .header-logo {
    flex-shrink: 0;
    z-index: 2;
  }

  #section-{{ section.id }} .logo-link {
    display: inline-block;
    text-decoration: none;
  }

  #section-{{ section.id }} .logo-text {
    font-size: {{ section.settings.logo_text_size }}px;
    font-weight: {{ section.settings.logo_font_weight }};
    color: {{ section.settings.logo_text_color }};
    text-transform: {{ section.settings.logo_text_transform }};
    letter-spacing: 0.05em;
  }

  /* Navigation */
  #section-{{ section.id }} .header-nav {
    flex: 1;
    display: flex;
    justify-content: {{ section.settings.nav_alignment }};
    padding: 0 2rem;
  }

  #section-{{ section.id }} .nav-menu {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: {{ section.settings.nav_item_spacing }}px;
  }

  #section-{{ section.id }} .nav-item {
    position: relative;
  }

  #section-{{ section.id }} .nav-link {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.5rem 0;
    font-size: {{ section.settings.nav_font_size }}px;
    font-weight: {{ section.settings.nav_font_weight }};
    color: {{ section.settings.nav_text_color }};
    text-decoration: none;
    text-transform: {{ section.settings.nav_text_transform }};
    transition: color 0.2s ease;
  }

  #section-{{ section.id }} .nav-link:hover,
  #section-{{ section.id }} .nav-link.active {
    color: {{ section.settings.nav_hover_color }};
  }

  #section-{{ section.id }} .dropdown-icon {
    transition: transform 0.2s ease;
  }

  #section-{{ section.id }} .nav-item:hover .dropdown-icon {
    transform: rotate(180deg);
  }

  /* Dropdown Menu */
  #section-{{ section.id }} .dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    min-width: 200px;
    background: {{ section.settings.dropdown_bg_color }};
    border: 1px solid {{ section.settings.border_color }};
    list-style: none;
    margin: 0;
    padding: 0.5rem 0;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.2s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  #section-{{ section.id }} .nav-item:hover .dropdown-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  #section-{{ section.id }} .dropdown-link {
    display: block;
    padding: 0.75rem 1.5rem;
    font-size: 14px;
    color: {{ section.settings.nav_text_color }};
    text-decoration: none;
    transition: background 0.2s ease;
  }

  #section-{{ section.id }} .dropdown-link:hover {
    background: #f5f5f5;
    color: {{ section.settings.nav_hover_color }};
  }

  /* Header Actions */
  #section-{{ section.id }} .header-actions {
    display: flex;
    align-items: center;
    gap: {{ section.settings.icon_spacing }}px;
    flex-shrink: 0;
  }

  #section-{{ section.id }} .header-icon {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    color: {{ section.settings.icon_color }};
    text-decoration: none;
    transition: color 0.2s ease;
  }

  #section-{{ section.id }} .header-icon:hover {
    color: {{ section.settings.icon_hover_color }};
  }

  #section-{{ section.id }} .cart-count {
    position: absolute;
    top: 0;
    right: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 18px;
    height: 18px;
    padding: 0 4px;
    background: {{ section.settings.cart_count_bg }};
    color: {{ section.settings.cart_count_color }};
    font-size: 11px;
    font-weight: 600;
    border-radius: 50%;
  }

  /* Mobile Menu Toggle */
  #section-{{ section.id }} .mobile-menu-toggle {
    display: none;
    flex-direction: column;
    gap: 4px;
    width: 40px;
    height: 40px;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
  }

  #section-{{ section.id }} .hamburger-line {
    width: 24px;
    height: 2px;
    background: {{ section.settings.icon_color }};
    transition: all 0.3s ease;
  }

  /* Header Badge */
  #section-{{ section.id }} .header-badge {
    position: absolute;
    top: {{ section.settings.badge_position_top }}px;
    right: {{ section.settings.badge_position_right }}px;
    padding: 4px 12px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-radius: 2px;
    z-index: 1001;
  }

  /* Responsive */
  @media screen and (max-width: 1024px) {
    #section-{{ section.id }} .header-nav {
      display: none;
    }

    #section-{{ section.id }} .mobile-menu-toggle {
      display: flex;
    }
  }

  @media screen and (max-width: 768px) {
    #section-{{ section.id }} .header-container {
      padding: 15px 20px;
    }

    #section-{{ section.id }} .header-actions {
      gap: 12px;
    }

    #section-{{ section.id }} .header-badge {
      font-size: 9px;
      padding: 3px 8px;
    }
  }
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "header",
      "content": "Header Layout"
    },
    {
      "type": "select",
      "id": "header_position",
      "label": "Header Position",
      "options": [
        { "value": "relative", "label": "Relative" },
        { "value": "sticky", "label": "Sticky" },
        { "value": "fixed", "label": "Fixed" }
      ],
      "default": "sticky"
    },
    {
      "type": "range",
      "id": "container_width",
      "min": 1200,
      "max": 2000,
      "step": 50,
      "unit": "px",
      "label": "Container Max Width",
      "default": 1400
    },
    {
      "type": "range",
      "id": "header_padding_vertical",
      "min": 10,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Vertical Padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "header_padding_horizontal",
      "min": 20,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Horizontal Padding",
      "default": 40
    },
    {
      "type": "color",
      "id": "header_bg_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "border_width",
      "min": 0,
      "max": 5,
      "step": 1,
      "unit": "px",
      "label": "Border Width",
      "default": 1
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#e5e5e5"
    },
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo Image"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 300,
      "step": 10,
      "unit": "px",
      "label": "Logo Width",
      "default": 120
    },
    {
      "type": "range",
      "id": "logo_text_size",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Logo Text Size",
      "default": 28
    },
    {
      "type": "select",
      "id": "logo_font_weight",
      "label": "Logo Font Weight",
      "options": [
        { "value": "300", "label": "Light" },
        { "value": "400", "label": "Normal" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semi Bold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "700"
    },
    {
      "type": "select",
      "id": "logo_text_transform",
      "label": "Logo Text Transform",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "uppercase", "label": "Uppercase" },
        { "value": "lowercase", "label": "Lowercase" },
        { "value": "capitalize", "label": "Capitalize" }
      ],
      "default": "uppercase"
    },
    {
      "type": "color",
      "id": "logo_text_color",
      "label": "Logo Text Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Navigation"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "select",
      "id": "nav_alignment",
      "label": "Navigation Alignment",
      "options": [
        { "value": "flex-start", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "nav_font_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Nav Font Size",
      "default": 14
    },
    {
      "type": "select",
      "id": "nav_font_weight",
      "label": "Nav Font Weight",
      "options": [
        { "value": "300", "label": "Light" },
        { "value": "400", "label": "Normal" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semi Bold" }
      ],
      "default": "400"
    },
    {
      "type": "select",
      "id": "nav_text_transform",
      "label": "Nav Text Transform",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "uppercase", "label": "Uppercase" },
        { "value": "lowercase", "label": "Lowercase" },
        { "value": "capitalize", "label": "Capitalize" }
      ],
      "default": "uppercase"
    },
    {
      "type": "range",
      "id": "nav_item_spacing",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Navigation Item Spacing",
      "default": 30
    },
    {
      "type": "color",
      "id": "nav_text_color",
      "label": "Nav Text Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "nav_hover_color",
      "label": "Nav Hover Color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "dropdown_bg_color",
      "label": "Dropdown Background",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Header Icons"
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Show Search",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_wishlist",
      "label": "Show Wishlist",
      "default": true
    },
    {
      "type": "url",
      "id": "wishlist_url",
      "label": "Wishlist URL",
      "info": "Default: /pages/wishlist"
    },
    {
      "type": "checkbox",
      "id": "show_cart",
      "label": "Show Cart",
      "default": true
    },
    {
      "type": "range",
      "id": "icon_spacing",
      "min": 5,
      "max": 30,
      "step": 5,
      "unit": "px",
      "label": "Icon Spacing",
      "default": 15
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "icon_hover_color",
      "label": "Icon Hover Color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "cart_count_bg",
      "label": "Cart Count Background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "cart_count_color",
      "label": "Cart Count Text Color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Header Badge"
    },
    {
      "type": "checkbox",
      "id": "show_badge",
      "label": "Show Badge",
      "default": false
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Badge Text",
      "default": "SALE"
    },
    {
      "type": "range",
      "id": "badge_position_top",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Badge Position Top",
      "default": 10
    },
    {
      "type": "range",
      "id": "badge_position_right",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Badge Position Right",
      "default": 40
    },
    {
      "type": "color",
      "id": "badge_bg_color",
      "label": "Badge Background",
      "default": "#ff6b6b"
    },
    {
      "type": "color",
      "id": "badge_text_color",
      "label": "Badge Text Color",
      "default": "#ffffff"
    }
  ]
}
{% endschema %}